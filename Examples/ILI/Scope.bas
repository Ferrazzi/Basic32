5 POT = 12
10 REM ===== OSCILLOSCOPE PEN TRACE ON GRID =====
20 D = 10
30 ILI INIT 17 16 5 3
40 ILI LED 32 1
50 ILI SETBGCOLOR 0 0 0
60 ILI CLEAR
70 REM ==== GRID AREA ====
80 W = 320
90 H = 240
100 GX = 0
110 GY = 0
120 GW = W
130 GH = H
140 REM ==== ADC MAX (ESP32=4095) ====
150 ADCMAX = 4095
160 REM ===== LOOP =====
170 ILI CLEAR
180 REM ==== HORIZONTAL GRID ====
190 FOR B = 0 TO GH STEP 10
200 Y1 = GY + B
210 X1 = GX
220 X2 = GX + GW - 1
230 ILI LINE X1 Y1 X2 Y1 80 80 80
240 NEXT B
250 REM ==== VERTICAL GRID =====
260 FOR A = 0 TO GW STEP 32
270 X1 = GX + A
280 Y1 = GY
290 Y2 = GY + GH - 1
300 ILI LINE X1 Y1 X1 Y2 80 80 80
310 NEXT A
320 REM ==== BORDER ====
330 X1 = GX
340 Y1 = GY
350 X2 = GX + GW - 1
360 Y2 = GY + GH - 1
370 ILI LINE X1 Y1 X2 Y1 80 80 80
380 ILI LINE X1 Y2 X2 Y2 80 80 80
390 ILI LINE X1 Y1 X1 Y2 80 80 80
400 ILI LINE X2 Y1 X2 Y2 80 80 80
410 REM ==== INITIALIZE PREVIOUS POINT ====
420 V = AREAD(POT)
430 Q = (GH - 1) - (V * (GH - 1) / ADCMAX)
440 IF Q < 0 THEN Q = 0
450 IF Q > GH - 1 THEN Q = GH - 1
460 Q = GY + Q
470 P = GX
480 REM ==== DRAW THE PEN FROM LEFT TO RIGHT ====
490 FOR X = 0 TO GW - 1
500 V = AREAD(POT)
510 Y = (GH - 1) - (V * (GH - 1) / ADCMAX)
520 IF Y < 0 THEN Y = 0
530 IF Y > GH - 1 THEN Y = GH - 1
540 Y = GY + Y
550 X2 = GX + X
560 ILI LINE P Q X2 Y 0 255 0
570 P = X2
580 Q = Y
590 DELAY D
600 NEXT X
610 GOTO 170
